;             
CREATE USER IF NOT EXISTS "BIOSECURITAS" SALT '750ad18afd800063' HASH '3adb54e6fd2fe34392c629661c073b53854597d4c92269582087258763a08d87' ADMIN;               
CREATE SEQUENCE "PUBLIC"."HIBERNATE_SEQUENCE" START WITH 1;   
CREATE SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_21B5DD9D_89A1_474A_AC1A_CA49DB993AB8" START WITH 2 BELONGS_TO_TABLE;
CREATE SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_800287C8_E899_4BD3_BCF1_29956BA2DEBB" START WITH 3 BELONGS_TO_TABLE;
CREATE MEMORY TABLE "PUBLIC"."flyway_schema_history"(
    "installed_rank" INT NOT NULL,
    "version" VARCHAR(50),
    "description" VARCHAR(200) NOT NULL,
    "type" VARCHAR(20) NOT NULL,
    "script" VARCHAR(1000) NOT NULL,
    "checksum" INT,
    "installed_by" VARCHAR(100) NOT NULL,
    "installed_on" TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "execution_time" INT NOT NULL,
    "success" BOOLEAN NOT NULL
);             
ALTER TABLE "PUBLIC"."flyway_schema_history" ADD CONSTRAINT "PUBLIC"."flyway_schema_history_pk" PRIMARY KEY("installed_rank");
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.flyway_schema_history;   
CREATE INDEX "PUBLIC"."flyway_schema_history_s_idx" ON "PUBLIC"."flyway_schema_history"("success");           
CREATE MEMORY TABLE "PUBLIC"."USER"(
    "ID" BIGINT DEFAULT (NEXT VALUE FOR "PUBLIC"."SYSTEM_SEQUENCE_21B5DD9D_89A1_474A_AC1A_CA49DB993AB8") NOT NULL NULL_TO_DEFAULT SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_21B5DD9D_89A1_474A_AC1A_CA49DB993AB8",
    "USERNAME" VARCHAR(50) NOT NULL,
    "PASSWORD" VARCHAR(255) NOT NULL,
    "EMAIL" VARCHAR(255) NOT NULL,
    "DATE_CREATED" TIMESTAMP
);          
ALTER TABLE "PUBLIC"."USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");         
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.USER;    
CREATE MEMORY TABLE "PUBLIC"."AUTHORITY"(
    "ID" BIGINT DEFAULT (NEXT VALUE FOR "PUBLIC"."SYSTEM_SEQUENCE_800287C8_E899_4BD3_BCF1_29956BA2DEBB") NOT NULL NULL_TO_DEFAULT SEQUENCE "PUBLIC"."SYSTEM_SEQUENCE_800287C8_E899_4BD3_BCF1_29956BA2DEBB",
    "NAME" VARCHAR(255) NOT NULL
);  
ALTER TABLE "PUBLIC"."AUTHORITY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F" PRIMARY KEY("ID");    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.AUTHORITY;               
CREATE MEMORY TABLE "PUBLIC"."USER_AUTHORITY"(
    "USER_ID" INT NOT NULL,
    "AUTHORITY_ID" INT NOT NULL
);              
ALTER TABLE "PUBLIC"."USER_AUTHORITY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B" PRIMARY KEY("USER_ID", "AUTHORITY_ID");          
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.USER_AUTHORITY;          
CREATE MEMORY TABLE "PUBLIC"."CLIENT"(
    "CLIENT_CODE" INTEGER NOT NULL,
    "CC" VARCHAR(255),
    "CIF" VARCHAR(255),
    "DNI" VARCHAR(255),
    "T" INTEGER,
    "ADDRESS" VARCHAR(255),
    "CITY" VARCHAR(255),
    "COUNTRY" VARCHAR(255),
    "DATE_FIN" DATE,
    "DATE_INI" DATE,
    "F_ADDRESS" VARCHAR(255),
    "F_CITY" VARCHAR(255),
    "F_COUNTRY" VARCHAR(255),
    "F_POSTAL_CODE" INTEGER,
    "F_PROVINCE" VARCHAR(255),
    "NAME" VARCHAR(255),
    "NUMC" INTEGER,
    "POSTAL_CODE" INTEGER,
    "PROVINCE" VARCHAR(255),
    "REGA" VARCHAR(255),
    "REPRESENTANT" VARCHAR(255),
    "SURNAME" VARCHAR(255)
);          
ALTER TABLE "PUBLIC"."CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("CLIENT_CODE");              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CLIENT;  
CREATE MEMORY TABLE "PUBLIC"."FARM"(
    "ID" INTEGER NOT NULL,
    "ADDRESS" VARCHAR(255),
    "CITY" VARCHAR(255),
    "CONTACT_NAME" VARCHAR(255),
    "CONTACT_PHONE" INTEGER,
    "COUNTRY" VARCHAR(255),
    "NUM_SANDACH" VARCHAR(255),
    "POSTAL_CODE" INTEGER,
    "PREFIX" VARCHAR(255),
    "PROVINCE" VARCHAR(255),
    "CLIENT_ID_CLIENT_CODE" INTEGER
);          
ALTER TABLE "PUBLIC"."FARM" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_20" PRIMARY KEY("ID");        
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.FARM;    
CREATE MEMORY TABLE "PUBLIC"."HYDROLYZER"(
    "ID" INTEGER NOT NULL,
    "DATE_INI" DATE,
    "MAX_WEIGTH" FLOAT,
    "CLIENT_ID_CLIENT_CODE" INTEGER
);
ALTER TABLE "PUBLIC"."HYDROLYZER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");   
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.HYDROLYZER;              
CREATE MEMORY TABLE "PUBLIC"."INSTALLATION"(
    "ID" INTEGER NOT NULL,
    "COLLECTED_WEIGTH" FLOAT,
    "DELIVERY_DATE" DATE,
    "INITIAL_WEIGTH" FLOAT,
    "RETURN_DATE" DATE,
    "SEAL_DATE" DATE
);            
ALTER TABLE "PUBLIC"."INSTALLATION" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_3" PRIMARY KEY("ID"); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.INSTALLATION;            
CREATE MEMORY TABLE "PUBLIC"."INSTALLATION_FARM"(
    "INSTALLATION_ID" INTEGER NOT NULL,
    "FARM_ID" INTEGER NOT NULL
);
ALTER TABLE "PUBLIC"."INSTALLATION_FARM" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2F" PRIMARY KEY("INSTALLATION_ID", "FARM_ID");   
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.INSTALLATION_FARM;       
CREATE MEMORY TABLE "PUBLIC"."INSTALLATION_HYDROLYZER"(
    "INSTALLATION_ID" INTEGER NOT NULL,
    "HYDROLYZER_ID" INTEGER NOT NULL
);    
ALTER TABLE "PUBLIC"."INSTALLATION_HYDROLYZER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_74" PRIMARY KEY("INSTALLATION_ID", "HYDROLYZER_ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.INSTALLATION_HYDROLYZER; 
ALTER TABLE "PUBLIC"."INSTALLATION_HYDROLYZER" ADD CONSTRAINT "PUBLIC"."FKPLGK83236KJ0PVUR8HU7BWGIS" FOREIGN KEY("INSTALLATION_ID") REFERENCES "PUBLIC"."INSTALLATION"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."INSTALLATION_FARM" ADD CONSTRAINT "PUBLIC"."FKQHXITYWEH7LNEB9UYO2MXWX5D" FOREIGN KEY("FARM_ID") REFERENCES "PUBLIC"."FARM"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."FARM" ADD CONSTRAINT "PUBLIC"."FKHLMYO5WL7QQO3HN52FJ02VY5X" FOREIGN KEY("CLIENT_ID_CLIENT_CODE") REFERENCES "PUBLIC"."CLIENT"("CLIENT_CODE") NOCHECK;   
ALTER TABLE "PUBLIC"."INSTALLATION_FARM" ADD CONSTRAINT "PUBLIC"."FKQA9OQPDCN4HH7T6C0RJ9JPQIE" FOREIGN KEY("INSTALLATION_ID") REFERENCES "PUBLIC"."INSTALLATION"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."USER_AUTHORITY" ADD CONSTRAINT "PUBLIC"."FKGVXJS381K6F48D5D2YI11UH89" FOREIGN KEY("AUTHORITY_ID") REFERENCES "PUBLIC"."AUTHORITY"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."USER_AUTHORITY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_BC" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USER"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."USER_AUTHORITY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_BC8" FOREIGN KEY("AUTHORITY_ID") REFERENCES "PUBLIC"."AUTHORITY"("ID") NOCHECK;     
ALTER TABLE "PUBLIC"."USER_AUTHORITY" ADD CONSTRAINT "PUBLIC"."FKPQLSJPKYBGOS9W2SVCRI7J8XY" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USER"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."INSTALLATION_HYDROLYZER" ADD CONSTRAINT "PUBLIC"."FKDXVBB5945BYH1PX22H3YMF01T" FOREIGN KEY("HYDROLYZER_ID") REFERENCES "PUBLIC"."HYDROLYZER"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."HYDROLYZER" ADD CONSTRAINT "PUBLIC"."FKPDT9KRSJD63P2YDOLBT2NWLU1" FOREIGN KEY("CLIENT_ID_CLIENT_CODE") REFERENCES "PUBLIC"."CLIENT"("CLIENT_CODE") NOCHECK;             
